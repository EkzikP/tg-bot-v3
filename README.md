# Telegram-бот для ПО "Центр охраны"

Бот разработан для оперативного доступа к информации об охраняемом объекте.  
С помощью данного бота можно произвести следующие действия:  
 - Получить информацию об объекте по пультовому номеру  
 - Получить список ответственных лиц объекта  
 - Получить информацию об ответственном лице по номеру телефона  
 - Начать проверку КТС  
 - Получить результат проверки КТС  
 - Получить список пользователей MyAlarm объекта  
 - Предоставить/забрать доступ пользователю к MyAlarm  
 - Модифицировать право на использование виртуальной КТС  
 - Получить список объектов пользователя MyAlarm  
 - Получить список разделов объекта  
 - Получить список шлейфов объекта  

Ботом могут воспользоваться как инженеры по обслуживанию охранно-пожарной сигнализации, так и клиенты. Разница в доступе к объектам: инженеры - могут получить доступ ко всем объектам без ограничений, а клиенты - только к объектам, в которых номер телефона клиента указан в ответственных лицах объекта. В системе MyAlarm - клиент должен быть с правами администратора.
Бот работает только в приватных чатах.

В боте используется написанная мной SDK - https://github.com/EkzikP/sdk_andromeda_go_v2  

Для запуска бота, в корне проекта должен находиться файл:  
config.json  
со следующим содержанием:  
{  
"telegram_bot_token": <"API Token Telegram bot">,  
"api_key": <"API Key задается в настройках ПО "Центр Охраны"">,  
"host": "http://<IP:PORT>/api - ссылка на доступ к API ПО "Центр охраны"",  
"phone_engineer": {  
"+79999999999": "Комментарий к телефону (например ФИО инженера)",  
"+79999999998": "Инженер 2",  
"+79999999997": "Инженер 3"  
  }  
}

При первом запуске в корне проекта создается база SQLite "users.db", где хранится сопоставление номера телефона пользователя telegram с ID чата.